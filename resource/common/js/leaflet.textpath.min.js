!function(){var t=L.Polyline.prototype.onAdd,e=L.Polyline.prototype.onRemove,i=L.Polyline.prototype._updatePath,o=L.Polyline.prototype.bringToFront,r={onAdd:function(e){t.call(this,e),this._textRedraw()},onRemove:function(t){t=t||this._map,t&&this._textNode&&t._pathRoot.removeChild(this._textNode),e.call(this,t)},bringToFront:function(){o.call(this),this._textRedraw()},_updatePath:function(){i.call(this),this._textRedraw()},_textRedraw:function(){var t=this._text,e=this._textOptions;t&&this.setText(null).setText(t,e)},setText:function(t,e){if(this._text=t,this._textOptions=e,!L.Browser.svg||"undefined"==typeof this._map)return this;var i={repeat:!1,fillColor:"black",attributes:{},below:!1};if(e=L.Util.extend(i,e),!t)return this._textNode&&this._textNode.parentNode&&(this._map._pathRoot.removeChild(this._textNode),delete this._textNode),this;t=t.replace(/ /g,"Â ");var o="pathdef-"+L.Util.stamp(this),r=this._map._pathRoot;if(this._path.setAttribute("id",o),e.repeat){var s=L.Path.prototype._createElement("text");for(var a in e.attributes)s.setAttribute(a,e.attributes[a]);s.appendChild(document.createTextNode(t)),r.appendChild(s);var n=s.getComputedTextLength();r.removeChild(s),t=new Array(Math.ceil(this._path.getTotalLength()/n)).join(t)}var h=L.Path.prototype._createElement("text"),l=L.Path.prototype._createElement("textPath"),p=e.offset||this._path.getAttribute("stroke-width");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+o),h.setAttribute("dy",p);for(var a in e.attributes)h.setAttribute(a,e.attributes[a]);if(l.appendChild(document.createTextNode(t)),h.appendChild(l),this._textNode=h,e.below?r.insertBefore(h,r.firstChild):r.appendChild(h),e.center){var d=h.getComputedTextLength(),u=this._path.getTotalLength();h.setAttribute("dx",u/2-d/2)}if(e.orientation){var c=0;switch(e.orientation){case"flip":c=180;break;case"perpendicular":c=90;break;default:c=e.orientation}var x=h.getBBox().x+h.getBBox().width/2,_=h.getBBox().y+h.getBBox().height/2;h.setAttribute("transform","rotate("+c+" "+x+" "+_+")")}if(this.options.clickable){!L.Browser.svg&&L.Browser.vml||l.setAttribute("class","leaflet-clickable"),L.DomEvent.on(h,"click",this._onMouseClick,this);for(var f=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],m=0;m<f.length;m++)L.DomEvent.on(h,f[m],this._fireMouseEvent,this)}return this}};L.Polyline.include(r),L.LayerGroup.include({setText:function(t,e){for(var i in this._layers)"function"==typeof this._layers[i].setText&&this._layers[i].setText(t,e);return this}})}();