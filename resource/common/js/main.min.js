!function(){"use strict";function e(){$(".fixInfo").animate({height:s,top:u+v-m+"px"},3e3,"easeInQuart")}function t(){p.style.top=u+v-m+"px"}function n(e,t){d(),h.href="#"+e;var n=document.createElement("img");n.src=t,h.appendChild(n);var a=document.createElement("ul");f.appendChild(a),E=document.createElement("li"),E.id=e,a.appendChild(E)}function a(e,t){d(),h.innerHTML=e,h.setAttribute("href",C+"#"+t)}function d(){f=document.createElement("li"),g.appendChild(f),h=document.createElement("a"),f.appendChild(h)}function c(e,t){$.get(e,function(e,n){var a=[];if("success"==n){e=e.replace(/\r/gm,"");var d=e.split("\n"),c=0;for(c in d)if(0!==d[c].length){var r=d[c].split(",");a.push(r)}}t(a)})}function r(e,t,n,a){if(e){var d=document.createElement("section");d.classList.add(t);var c=document.createElement("h1"),r=document.createElement("span");r.innerHTML=n,c.classList.add("sectionTitle");var i=document.createElement("div");i.innerHTML=e,a.appendChild(d),d.appendChild(c),c.appendChild(r),d.appendChild(i)}}function i(e,t){if(e){var n=document.createElement("div");n.innerHTML=e,t.appendChild(n)}}function o(e,t){var n="#tab"+t,a="tab"+t,d="event-table"+t,c=document.createElement("a");c.setAttribute("data-toggle","tab"),c.setAttribute("href",n);var r=document.createTextNode(e[0][0]),i=document.createElement("li");1==t?(i.classList.add("active"),i.classList.add("tab1")):2==t&&i.classList.add("tab2"),c.appendChild(r),i.appendChild(c),M.appendChild(i);var o=document.createElement("div");o.id=a,o.classList.add("tab-pane"),o.classList.add("fade"),1==t&&(o.classList.add("in"),o.classList.add("active")),S.appendChild(o);var l=document.createElement("table");l.id=d,l.classList.add("table-large"),o.appendChild(l);var s=document.createElement("tr"),m=document.createElement("th");m.innerHTML="時間",m.classList.add("st-head-row"),l.appendChild(s),s.appendChild(m),function(){for(var t=1;t<e[0].length;t++){var n=document.createElement("th");n.innerHTML=e[0][t],s.appendChild(n)}}();for(var p=1;p<e.length;p++){var u,v;e[p][0]&&(v=document.createElement("tr"),l.appendChild(v));for(var h=0;h<e[p].length;h++)if(e[p][0]){var f="event"+t+p+h;u=p;var E=document.createElement("td");e[p][h]==e[p][0]?E.classList.add("eventTime"):E.classList.add(f),E.innerHTML=e[p][h],v.appendChild(E)}else if(!e[p][0]&&e[p][h]&&e[p][h].indexOf("http")){var C,L=document.createElement("div");if(L.innerHTML=e[p][h],p-u==1)C=p-1;else{var g=p-u;C=p-g}var T=".event"+t+C+h,w=document.querySelector(T);w.appendChild(L)}else if(!e[p][0]&&e[p][h].match(/http/)){var y,b=document.createElement("a");if(b.href=e[p][h],b.setAttribute("target","_blank"),p-u==2)y=p-2;else{var H=p-u;y=p-H}var q=".event"+t+y+h,_=document.querySelector(q),$=_.lastChild;b.appendChild($),_.appendChild(b)}}}function l(e){var t="#event-table"+e,n=document.querySelector(t),a="#tab"+e,d=document.querySelector(a),c=document.createElement("table");c.classList.add("table-small"),d.appendChild(c);for(var r=n.rows.length,i=n.rows[0].cells.length,o=1;o<r;o++)for(var l=0;l<i;l++)if(n.rows[o].cells[l].innerHTML){var s=document.createElement("tr");if(c.appendChild(s),n.rows[o].cells[l]==n.rows[o].cells[0]){var m=document.createElement("th");m.innerHTML=n.rows[o].cells[0].innerHTML,m.setAttribute("colspan","2"),m.classList.add("eventTime"),s.appendChild(m)}else{var p=document.createElement("th");p.innerHTML=n.rows[0].cells[l].innerHTML,s.appendChild(p);var u=document.createElement("td");u.innerHTML=n.rows[o].cells[l].innerHTML,n.rows[o].cells[l]==n.rows[o].cells[0]&&u.classList.add("eventTime"),s.appendChild(u)}}}$(window).on("load resize orientationchange",function(){e()}),$(window).on("scroll",function(){t()});var s=200,m=60,p=document.querySelector(".fixInfo"),u=window.innerHeight||document.documentElement.clientHeight,v=document.documentElement.scrollTop||document.body.scrollTop;p.style.height=s+"px",p.style.top=u-s+50+"px",document.querySelector("body").style.paddingBottom=m+"px",!function(e,t,n){var a,d=e.getElementsByTagName(t)[0],c=/^http:/.test(e.location)?"http":"https";e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src=c+"://platform.twitter.com/widgets.js",d.parentNode.insertBefore(a,d))}(document,"script","twitter-wjs"),$(function(){var e=$("#sideMenu").mmenu({extensions:["shadow-page","theme-white"],offCanvas:{position:"right",zposition:"front"}}),t=$("#my-icon"),n=e.data("mmenu");t.on("click",function(){n.open()}),n.bind("opened",function(){setTimeout(function(){t.addClass("is-active")},100)}),n.bind("closed",function(){setTimeout(function(){t.removeClass("is-active")},100)})});var h,f,E,C=window.location.href,L=document.querySelector("nav"),g=document.createElement("ul");L.appendChild(g),n("twitter","common/img/twitter.png");var T=document.querySelector("#twitter");T.innerHTML='<a class="twitter-timeline" href="https://twitter.com/hashtag/%E5%B8%B8%E7%9B%A4%E5%B9%B3%E3%81%95%E3%81%8F%E3%82%89%E3%81%BE%E3%81%A4%E3%82%8A" data-widget-id="819089163978821632">#常盤平さくらまつり のツイート</a>',a("日時","home_date"),a("会場・アクセス","place"),a("ご注意","caution"),a("マップ","map"),a("イベント","event"),a("主催・後援・協力・協賛","sponsors");var w=document.querySelectorAll("nav a");Array.prototype.map.call(w,function(e){e.addEventListener("click",function(){L.classList.remove("mm-current","mm-opened");var e=document.querySelector(".mm-slideout");e.click()})}),smoothScroll.init({speed:800,updateURL:!1,easing:"easeOutQuad"});var y=300;window.addEventListener("scroll",function(e){$(window).scrollTop()>y?$("header").addClass("smaller"):$("header").hasClass("smaller")&&$("header").removeClass("smaller")}),c("common/data/access.csv",function(e){var t=document.querySelector(".home_place"),n=document.querySelector(".home"),a=document.createElement("section");a.classList.add(".home_access"),n.appendChild(a);var d=e.length,c=1,r=1,i=1,o=document.createElement("div");for(o.classList.add("home_access_palce"),t.appendChild(o),c;c<d;c++){var l=document.createElement("div");l.innerHTML=e[c][0],o.appendChild(l)}if(e[r][1]){var s=document.createElement("h1");s.classList.add("sectionTitle"),a.appendChild(s);var m=document.createElement("span");m.innerHTML="アクセス",s.appendChild(m);var p=document.createElement("ul");for(a.appendChild(p),r;r<d;r++){var u=document.createElement("li");u.innerHTML=e[r][1],p.appendChild(u)}}if(null!==e[i][2]){var v=document.createElement("div");for(a.appendChild(v),i;i<d;i++)v.innerHTML=e[i][2],v.appendChild(v)}}),c("common/data/caution.csv",function(e){var t=e.length;if(t-1>0){var n=document.querySelector(".caution"),a=document.createElement("h1");a.classList.add("home-caution"),a.classList.add("sectionTitle"),n.appendChild(a);var d=document.createElement("span");d.innerHTML="ご注意",a.appendChild(d);var c=document.createElement("ul");n.appendChild(c);var r=1;for(r;r<t;r++){var i=document.createElement("li");i.innerHTML=e[r],c.appendChild(i)}}}),c("common/data/eventinfo.csv",function(e){var t=e.length,n=document.querySelector(".event_info");if(e[1][0])for(var a=1;a<t;a++)for(var d=0;d<e[a].length;d++){var c=document.createElement("div");d>0&&c.classList.add("event_day"),c.innerHTML=e[a][d],n.appendChild(c)}});var b=document.querySelector(".event"),H=document.createElement("section");H.classList.add("event_schedule"),b.appendChild(H);var M=document.createElement("ul");M.classList.add("nav"),M.classList.add("nav-tabs"),H.appendChild(M);var S=document.createElement("div");S.classList.add("tab-content"),H.appendChild(S),c("common/data/event-1.csv",function(e){var t=1;e&&o(e,t),l(t)}),c("common/data/event-2.csv",function(e){var t=2;e&&o(e,t),l(t)}),c("common/data/sponsors.csv",function(e){var t=(e.length,document.querySelector(".sponsors"));r(e[1][0],"sponsors_organizer","主催",t);var n=t.children[0];i(e[1][1],n),r(e[1][2],"sponsors_support","後援",t),r(e[1][3],"sponsors_cooperation","協力",t),r(e[1][4],"sponsors_sponsorship","協賛",t);var a=document.querySelector("footer");i(e[1][0],a)})}();
