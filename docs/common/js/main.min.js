!function(){"use strict";function e(){$(".fixInfo").animate({height:s,top:p+v-m+"px"},3e3,"easeInQuart")}function t(){u.style.top=p+v-m+"px"}function n(e,t){d(),h.href="#"+e;var n=document.createElement("img");n.src=t,h.appendChild(n);var a=document.createElement("ul");f.appendChild(a),E=document.createElement("li"),E.id=e,a.appendChild(E)}function a(e,t){d(),h.innerHTML=e,h.setAttribute("href",L+"#"+t)}function d(){f=document.createElement("li"),y.appendChild(f),h=document.createElement("a"),f.appendChild(h)}function c(e,t){$.get(e,function(e,n){var a=[];if("success"==n){e=e.replace(/\r/gm,"");var d=e.split("\n"),c=0;for(c in d)if(0!==d[c].length){var r=d[c].split(",");a.push(r)}}t(a)})}function r(e,t,n,a){if(e){var d=document.createElement("section");d.classList.add(t);var c=document.createElement("h1"),r=document.createElement("span");r.innerHTML=n,c.classList.add("sectionTitle");var o=document.createElement("div");o.innerHTML=e,a.appendChild(d),d.appendChild(c),c.appendChild(r),d.appendChild(o)}}function o(e,t){if(e){var n=document.createElement("div");n.innerHTML=e,t.appendChild(n)}}function i(e,t){var n="#tab"+t,a="tab"+t,d="event-table"+t,c=document.createElement("a");c.setAttribute("data-toggle","tab"),c.setAttribute("href",n);var r=document.createTextNode(e[0][0]),o=document.createElement("li");1==t?(o.classList.add("active"),o.classList.add("tab1")):2==t&&o.classList.add("tab2"),c.appendChild(r),o.appendChild(c),M.appendChild(o);var i=document.createElement("div");i.id=a,i.classList.add("tab-pane"),i.classList.add("fade"),1==t&&(i.classList.add("in"),i.classList.add("active")),S.appendChild(i);var l=document.createElement("table");l.id=d,l.classList.add("table-large"),i.appendChild(l);var s=document.createElement("tr"),m=document.createElement("th");m.innerHTML="時間",m.classList.add("st-head-row"),l.appendChild(s),s.appendChild(m),function(){for(var t=1;t<e[0].length;t++){var n=document.createElement("th");n.innerHTML=e[0][t],s.appendChild(n)}}();for(var u=1;u<e.length;u++){var p,v;e[u][0]&&(v=document.createElement("tr"),l.appendChild(v));for(var h=0;h<e[u].length;h++)if(e[u][0]){var f="event"+t+u+h;p=u;var E=document.createElement("td");e[u][h]==e[u][0]?E.classList.add("eventTime"):E.classList.add(f),E.innerHTML=e[u][h],v.appendChild(E)}else if(!e[u][0]&&e[u][h]&&e[u][h].indexOf("http")){var L,C=document.createElement("div");if(C.innerHTML=e[u][h],u-p==1)L=u-1;else{var y=u-p;L=u-y}var g=".event"+t+L+h,T=document.querySelector(g);T.appendChild(C)}else if(!e[u][0]&&e[u][h].match(/http/)){var b,w=document.createElement("a");if(w.href=e[u][h],w.setAttribute("target","_blank"),u-p==2)b=u-2;else{var H=u-p;b=u-H}var _=".event"+t+b+h,q=document.querySelector(_),A=q.lastChild;w.appendChild(A),q.appendChild(w)}}}function l(e){var t="#event-table"+e,n=document.querySelector(t),a="#tab"+e,d=document.querySelector(a),c=document.createElement("table");c.classList.add("table-small"),d.appendChild(c);for(var r=n.rows.length,o=n.rows[0].cells.length,i=1;i<r;i++)for(var l=0;l<o;l++)if(n.rows[i].cells[l].innerHTML){var s=document.createElement("tr");if(c.appendChild(s),n.rows[i].cells[l]==n.rows[i].cells[0]){var m=document.createElement("th");m.innerHTML=n.rows[i].cells[0].innerHTML,m.setAttribute("colspan","2"),m.classList.add("eventTime"),s.appendChild(m)}else{var u=document.createElement("th");u.innerHTML=n.rows[0].cells[l].innerHTML,s.appendChild(u);var p=document.createElement("td");p.innerHTML=n.rows[i].cells[l].innerHTML,n.rows[i].cells[l]==n.rows[i].cells[0]&&p.classList.add("eventTime"),s.appendChild(p)}}}$(window).on("load resize orientationchange",function(){e()}),$(window).on("scroll",function(){t()});var s=200,m=60,u=document.querySelector(".fixInfo"),p=window.innerHeight||document.documentElement.clientHeight,v=document.documentElement.scrollTop||document.body.scrollTop;u.style.height=s+"px",u.style.top=p-s+50+"px",document.querySelector("body").style.paddingBottom=m+"px",!function(e,t,n){var a,d=e.getElementsByTagName(t)[0],c=/^http:/.test(e.location)?"http":"https";e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src=c+"://platform.twitter.com/widgets.js",d.parentNode.insertBefore(a,d))}(document,"script","twitter-wjs"),$(function(){var e=$("#sideMenu").mmenu({extensions:["shadow-page","theme-white"],offCanvas:{position:"right",zposition:"front"}}),t=$("#my-icon"),n=e.data("mmenu");t.on("click",function(){n.open()}),n.bind("opened",function(){setTimeout(function(){t.addClass("is-active")},100)}),n.bind("closed",function(){setTimeout(function(){t.removeClass("is-active")},100)})});var h,f,E,L=window.location.href,C=document.querySelector("nav"),y=document.createElement("ul");C.appendChild(y),n("twitter","common/img/twitter.png");var g=document.querySelector("#twitter");g.innerHTML='<a class="twitter-timeline" href="https://twitter.com/hashtag/%E5%B8%B8%E7%9B%A4%E5%B9%B3%E3%81%95%E3%81%8F%E3%82%89%E3%81%BE%E3%81%A4%E3%82%8A" data-widget-id="819089163978821632">#常盤平さくらまつり のツイート</a>',a("日時","home_date"),a("会場・アクセス","place"),a("ご注意","caution"),a("マップ","map"),a("イベント","event"),a("主催・後援・協力・協賛","sponsors");var T=document.querySelectorAll("nav a");Array.prototype.map.call(T,function(e){e.addEventListener("click",function(){C.classList.remove("mm-current","mm-opened");var e=document.querySelector(".mm-slideout");e.click()})}),smoothScroll.init({speed:800,updateURL:!1,easing:"easeOutQuad"});var b=300;window.addEventListener("scroll",function(e){$(window).scrollTop()>b?$("header").addClass("smaller"):$("header").hasClass("smaller")&&$("header").removeClass("smaller")}),c("common/data/access.csv",function(e){var t=document.querySelector(".home_place"),n=document.querySelector(".home"),a=document.createElement("section");a.classList.add(".home_access"),n.appendChild(a);var d=e.length,c=1,r=1,o=1,i=document.createElement("div");for(i.classList.add("home_access_palce"),t.appendChild(i),c;c<d;c++){var l=document.createElement("div");l.innerHTML=e[c][0],i.appendChild(l)}if(e[r][1]){var s=document.createElement("h1");s.classList.add("sectionTitle"),a.appendChild(s);var m=document.createElement("span");m.innerHTML="アクセス",s.appendChild(m);var u=document.createElement("ul");for(a.appendChild(u),r;r<d;r++){var p=document.createElement("li");p.innerHTML=e[r][1],u.appendChild(p)}}if(null!==e[o][2]){var v=document.createElement("div");for(a.appendChild(v),o;o<d;o++)v.innerHTML=e[o][2],v.appendChild(v)}}),c("common/data/caution.csv",function(e){var t=e.length;if(t-1>0){var n=document.querySelector(".caution"),a=document.createElement("h1");a.classList.add("home-caution"),a.classList.add("sectionTitle"),n.appendChild(a);var d=document.createElement("span");d.innerHTML="ご注意",a.appendChild(d);var c=document.createElement("ul");n.appendChild(c);var r=1;for(r;r<t;r++){var o=document.createElement("li");o.innerHTML=e[r],c.appendChild(o)}}}),c("common/data/eventinfo.csv",function(e){var t=e.length,n=document.querySelector(".event_info");if(e[1][0])for(var a=1;a<t;a++)for(var d=0;d<e[a].length;d++){var c=document.createElement("div");d>0&&c.classList.add("event_day"),c.innerHTML=e[a][d],n.appendChild(c)}});var w=document.querySelector(".event"),H=document.createElement("section");H.classList.add("event_schedule"),w.appendChild(H);var M=document.createElement("ul");M.classList.add("nav"),M.classList.add("nav-tabs"),H.appendChild(M);var S=document.createElement("div");S.classList.add("tab-content"),H.appendChild(S),c("common/data/event-1.csv",function(e){var t=1;e&&i(e,t),l(t)}),c("common/data/event-2.csv",function(e){var t=2;e&&i(e,t),l(t)}),c("common/data/sponsors.csv",function(e){var t=(e.length,document.querySelector(".sponsors"));r(e[1][0],"sponsors_organizer","主催",t);var n=t.children[0];o(e[1][1],n),r(e[1][2],"sponsors_support","後援",t),r(e[1][3],"sponsors_cooperation","協力",t),r(e[1][4],"sponsors_sponsorship","協賛",t);var a=document.querySelector("footer");o(e[1][0],a)}),c("common/data/date.csv",function(e){var t=e.length,n=1,a=document.querySelector(".home_date"),d=document.createElement("div");for(d.classList.add("home_eventInfo"),a.appendChild(d),n;n<t;n++){var c=document.createElement("ul");d.appendChild(c);var r=0,o=e[n].length;for(r;r<o;r++){var i=document.createElement("li");i.innerHTML=e[n][r],0===r?i.classList.add("home_eventDay"):i.classList.add("home_eventTime"),c.appendChild(i)}}}),c("common/data/info.csv",function(e){var t=e[1][0];switch(t){case"赤":document.querySelector("body").classList.add("is_red");break;case"ピンク":document.querySelector("body").classList.add("is_pink");break;case"ピンク2":document.querySelector("body").classList.add("is_pink2");break;case"黒":document.querySelector("body").classList.add("is_black");break;case"黄色":document.querySelector("body").classList.add("is_yellow")}var n=document.querySelector(".header_siteTitle");n.innerHTML=e[1][1];var a=document.createElement("meta");a.setAttribute("title",n),document.getElementsByTagName("head")[0].appendChild(a);var d=e[1][2],c=document.createElement("meta");if(c.setAttribute("description",d),document.getElementsByTagName("head")[0].appendChild(c),e[1][2]){var r=document.createElement("img"),o=e[1][3];r.src=o,r.className="mainImg_img",document.querySelector(".mainImg").appendChild(r)}if(e[1][4]){var i=document.createElement("div");i.innerHTML=e[1][4],i.classList.add("home_eventTime_caution"),document.querySelector(".home_date").appendChild(i)}})}();
